<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SwisCasino - Aero Luxury</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap');
        body { margin: 0; height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Ubuntu', sans-serif; background: #0078d7 url('https://images.unsplash.com/photo-1500628550463-c8881a54d4d4?auto=format&fit=crop&w=1500&q=80') center/cover; overflow: hidden; }
        
        .user-profile { position: fixed; top: 15px; left: 15px; z-index: 100; display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.4); backdrop-filter: blur(10px); padding: 5px 12px; border-radius: 50px; border: 2px solid #fff; }
        .user-avatar { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #fff; }
        
        .withdraw-btn { position: fixed; top: 15px; right: 15px; z-index: 100; background: linear-gradient(180deg, #4ade80, #16a34a); color: white; font-weight: 800; padding: 8px 16px; border-radius: 50px; border: 2px solid #fff; box-shadow: 0 4px 15px rgba(22,163,74,0.4); cursor: pointer; font-size: 12px; }

        .casino-cabinet { background: rgba(255,255,255,0.25); backdrop-filter: blur(20px); border: 3px solid rgba(255,255,255,0.7); border-radius: 40px; width: 92vw; max-width: 380px; padding: 20px; z-index: 10; display: flex; flex-direction: column; gap: 15px; box-shadow: 0 30px 60px rgba(0,0,0,0.3); }
        .logo-text { font-size: 2.5rem; font-weight: 900; background: linear-gradient(to bottom, #00a3ff, #005a9e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; font-style: italic; }
        
        .display-screen { background: white; border-radius: 25px; padding: 15px; border: 2px solid #fff; box-shadow: inset 0 2px 10px rgba(0,0,0,0.1); }
        .reels-area { background: #fff; border-radius: 20px; height: 120px; display: flex; gap: 5px; padding: 5px; border: 4px solid #e1f5fe; overflow: hidden; }
        .reel-col { flex: 1; overflow: hidden; background: #f8fdff; border-radius: 10px; position: relative; }
        .strip-inner { position: absolute; width: 100%; display: flex; flex-direction: column; transition: transform 3s cubic-bezier(0.15, 0, 0.1, 1); }
        .sym { height: 104px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; }

        .action-btn { background: linear-gradient(180deg, #5ecfff, #0078d7); color: white; font-weight: bold; padding: 15px; border-radius: 20px; border: 2px solid #fff; box-shadow: 0 10px 20px rgba(0,120,215,0.3); width: 100%; }
        .aero-modal { background: rgba(255, 255, 255, 0.98); border-radius: 30px; border: 3px solid #00a3ff; padding: 25px; box-shadow: 0 0 50px rgba(0,0,0,0.2); width: 90%; max-width: 340px; }
        .inventory-item { display: inline-flex; align-items: center; background: white; padding: 2px 8px; border-radius: 8px; font-size: 10px; border: 1px solid #eee; }
    </style>
</head>
<body>

    <div class="user-profile">
        <img id="user-pic" class="user-avatar" src="https://via.placeholder.com/100" alt="Ava">
        <span id="user-display-name" class="user-name">–ò–≥—Ä–æ–∫</span>
    </div>

    <button class="withdraw-btn" onclick="openModal('withdraw-modal')">–í–´–í–û–î</button>

    <div class="casino-cabinet" id="main-cabinet">
        <div class="logo-text">SwisCasino</div>
        <div class="display-screen">
            <div class="text-[10px] font-bold text-sky-600 uppercase text-center">–ë–∞–ª–∞–Ω—Å</div>
            <div class="text-4xl font-black text-sky-900 text-center" id="bal-val">1000</div>
            <div class="flex justify-center gap-2 mt-2 h-5">
                <div id="item-c" class="hidden inventory-item text-green-600">üçÄ <span id="c-count">0</span></div>
                <div id="item-b" class="hidden inventory-item text-orange-600">üçî <span id="b-count">0</span></div>
            </div>
        </div>
        <div class="reels-area">
            <div class="reel-col"><div id="s1" class="strip-inner"></div></div>
            <div class="reel-col"><div id="s2" class="strip-inner"></div></div>
            <div class="reel-col"><div id="s3" class="strip-inner"></div></div>
        </div>
        <div class="flex flex-col gap-3">
            <input type="number" id="bet-val" value="10" min="10" class="w-full bg-white border-2 border-sky-100 rounded-xl p-2 text-center text-xl font-bold outline-none">
            <button id="spin-btn" onclick="triggerSpin()" class="action-btn">–ò–ì–†–ê–¢–¨</button>
            <div class="text-[10px] text-center opacity-40 uppercase font-bold cursor-pointer" onclick="openModal('promo-modal')">–ü—Ä–æ–º–æ–∫–æ–¥</div>
        </div>
        <div id="status-line" class="text-center h-4 text-xs font-bold italic text-sky-700"></div>
    </div>

    <div id="withdraw-modal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden flex items-center justify-center z-[200]">
        <div class="aero-modal text-center">
            <h3 class="text-xl font-black text-green-600 mb-2">–ú–ï–ù–Æ –í–´–í–û–î–ê</h3>
            <div class="text-left bg-sky-50 p-4 rounded-2xl text-xs space-y-2 text-sky-900 mb-4 border border-sky-100">
                <p>üí∞ <b>–ö—É—Ä—Å:</b> 10,000 –º–æ–Ω–µ—Ç = 15 –∑–≤—ë–∑–¥ ‚≠ê</p>
                <p>üìâ <b>–ú–∏–Ω–∏–º—É–º:</b> 10,000 –º–æ–Ω–µ—Ç.</p>
                <p>üìù <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b> –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –±–∞–ª–∞–Ω—Å–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</p>
            </div>
            <a href="https://t.me/AlexFin_Official" class="block w-full bg-blue-500 text-white py-3 rounded-xl font-bold mb-3 shadow-lg">–ù–ê–ü–ò–°–ê–¢–¨ –ê–î–ú–ò–ù–£</a>
            <button onclick="closeModal('withdraw-modal')" class="text-gray-400 font-bold text-xs uppercase">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="promo-modal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden flex items-center justify-center z-[200]">
        <div class="aero-modal text-center">
            <h3 class="text-lg font-bold text-sky-700 mb-4">–ë–û–ù–£–°-–ö–û–î</h3>
            <input type="text" id="code-in" class="w-full border-2 border-sky-100 rounded-xl p-3 text-center mb-4 uppercase outline-none font-bold">
            <button onclick="apply()" class="action-btn py-2">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
            <button onclick="closeModal('promo-modal')" class="mt-4 text-xs text-gray-400">–û–¢–ú–ï–ù–ê</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); tg.ready();

        const SYMS = ['üçé', 'üçå', 'üçã', 'ü´ê', '7Ô∏è‚É£', '‚ûñ'];
        // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è 3-—Ö —Å–∏–º–≤–æ–ª–æ–≤
        const MULTIPLIERS = { '7Ô∏è‚É£': 100, 'üçé': 10, 'üçå': 5, 'üçã': 3, 'ü´ê': 2, '‚ûñ': -2 };

        let state = { bal: 1000, c: 0, b: 0, busy: false, used: new Set() };

        function init() {
            if (tg.initDataUnsafe?.user) {
                const u = tg.initDataUnsafe.user;
                document.getElementById('user-display-name').innerText = u.first_name;
                if (u.photo_url) document.getElementById('user-pic').src = u.photo_url;
            }
            [1,2,3].forEach(id => {
                const s = document.getElementById('s'+id);
                for(let i=0; i<40; i++) {
                    let d = document.createElement('div'); d.className = 'sym';
                    d.innerText = SYMS[Math.floor(Math.random()*SYMS.length)];
                    s.appendChild(d);
                }
            });
            update();
        }

        function update() {
            document.getElementById('bal-val').innerText = state.bal.toLocaleString();
            document.getElementById('c-count').innerText = state.c;
            document.getElementById('b-count').innerText = state.b;
            document.getElementById('item-c').classList.toggle('hidden', state.c <= 0);
            document.getElementById('item-b').classList.toggle('hidden', state.b <= 0);
        }

        function triggerSpin() {
            if (state.busy) return;
            const bet = parseInt(document.getElementById('bet-val').value);
            if (bet > state.bal || bet < 10) { tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞"); return; }
            
            tg.HapticFeedback?.impactOccurred('medium');
            state.bal -= bet; state.busy = true; update();
            
            let res = [];
            [1,2,3].forEach((id, i) => {
                const strip = document.getElementById('s'+id);
                let pick = SYMS[Math.floor(Math.random()*SYMS.length)];
                if(state.c > 0 && Math.random() < 0.2) pick = '7Ô∏è‚É£';
                res.push(pick);
                strip.lastElementChild.innerText = pick;
                strip.style.transition = 'none'; strip.style.transform = 'translateY(0)';
                setTimeout(() => {
                    strip.style.transition = `transform ${2 + i*0.4}s cubic-bezier(0.1, 0, 0.1, 1)`;
                    strip.style.transform = `translateY(-${(40-1)*104}px)`;
                }, 50);
            });

            if(state.c > 0) state.c--;

            setTimeout(() => {
                state.busy = false;
                calculateWin(res, bet);
            }, 3200);
        }

        function calculateWin(res, bet) {
            const [a, b, c] = res;
            let win = 0;
            let statusText = "–ü–æ–≤–µ–∑–µ—Ç —Å–Ω–æ–≤–∞!";
            let color = "#0078d7";

            if (a === b && b === c) {
                // –¢—Ä–∏ –≤ —Ä—è–¥
                if (a === '‚ûñ') {
                    win = bet * MULTIPLIERS[a]; // -2x (—à—Ç—Ä–∞—Ñ)
                    statusText = "–ö–†–ê–•! –®–¢–†–ê–§ x2"; color = "red";
                } else {
                    win = bet * MULTIPLIERS[a];
                    statusText = "–î–ñ–ï–ö–ü–û–¢!"; color = "green";
                }
            } else if (a === b || b === c || a === c) {
                // –î–≤–∞ –≤ —Ä—è–¥
                let pair = (a === b) ? a : (b === c ? b : a);
                if (pair === '‚ûñ') {
                    win = 0; // –ü—Ä–æ—Å—Ç–æ —Ç–µ—Ä—è–µ—Ç —Å—Ç–∞–≤–∫—É (—É–∂–µ –≤—ã—á—Ç–µ–Ω–∞)
                    statusText = "BAR: –°—Ç–∞–≤–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞"; color = "orange";
                } else {
                    win = Math.floor(bet * (MULTIPLIERS[pair] / 2));
                    statusText = "–ü–ê–†–ê!"; color = "#2e7d32";
                }
            }

            state.bal += win;
            if (win > 0) tg.HapticFeedback?.notificationOccurred('success');
            msg(statusText, color);
            update();
        }

        function msg(t, c) { let e = document.getElementById('status-line'); e.innerText = t; e.style.color = c; }
        function openModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

        function apply() {
            const f = document.getElementById('code-in');
            const v = f.value.trim().toUpperCase();
            let ok = false;
            if (v === 'AF') { state.bal += 13; ok = true; }
            else if (v === 'WEIMIX') { state.bal += 56; ok = true; }
            else if (v === 'VAITEK') { state.b += 1; ok = true; }
            else if (v === 'REBOOT') { state.bal += 1000; ok = true; }
            else if (v === 'CLOVER') { state.c += 3; ok = true; }

            if(ok) {
                state.used.add(v); update(); f.value = ""; closeModal('promo-modal');
                msg("–ö–û–î –ü–†–ò–ù–Ø–¢", "green");
            }
        }

        window.onload = init;
    </script>
</body>
</html>
